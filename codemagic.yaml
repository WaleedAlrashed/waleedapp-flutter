workflows:
  default-workflow:
    name: Default Workflow
    max_build_duration: 60
    environment:
      vars:
        FCI_KEYSTORE_PATH: /tmp/keystore.keystore
        FCI_KEYSTORE: Encrypted(Z0FBQUFBQmlZN0V5NGhpQ241Y3l6QzEzaDAzTWh5bU5UVVZyeHBXbW9pNUZ0NjI4ZmFPd1dwSkpPVzBuekdEWmwzMVRXZ0dEd2FzSTNIelNwQzFfWk5QX2tzTUx5emF1NW1WMGFTRk0xYjdUVHc0VkZjd0VkZWI4RnFNNlRfZktPUFNCTzNubFFWN0hvZkxXWG5YVHR0UE9OZFQxcVA0U1JMb3JPZ2FVQ0dkUFVPWl9RSUFnak5IY0V3bG9DOE43ZzFvOU1JRXdkZEtXSmF2ZnhCNmxkWFBrVWVZSV9KQ216TXNPS2dLdk5WZ2V4ei14eG41elNyYzBJaWJGMS1kdG1vRzZCVFBzNXFoQmgzUGQycWpwMWtjZDJ6WXBXREwydXp4aWh0MW5JcnFmQVpFYkFrVVkyMHdEX241dE1EUkt0dDdpaGphcFlEcnMwMGRJbGhFYWRPODRGX2ViUVh6cjg5T0pDX3kxVFJUWUZzZ0VpMlJhVk9LMGNrSF8ydGJIVWc4YTI5QU9BcDMwTWZoYWtKZFduNlctT2VRWVB4dnA4aVlFQkl6ZEdqWmtIUzdQOFpUTVdOOTBuQm52Y2tXTFV1MVF1QmdGaWZsSGtSeHFEM1dnLWtjQkNrSUdmUVVBVWt5NlZhZm00dVl1ejJ3dnlNWkdkQ2N4clFUTHZiNHdLWjdhQk9tZHlKMXBsR1ViZUl2TUlHYWo4QUtaNGE2THlpWHJ1UGR0NlIzYnJaYldKdnZ4OHhUc2FvTnlsa19GWmk1ZGlCQ2xWdWE0MlV1MGx3N244amcyQ2NRRDc1ZDhVTkRwdnJLMzZ6ZFJQYUw3eC02M3BORndCbVBSV01kMktqX1E1R0pIOUpNYk5nckFFZ0RDSFF4N3VFTkhCd1EzWG0yalNsMGkyUVN6TEpQb3BkN0k4ODBDVnIwQUZXYUo2cmJQM29PR3o3RjlhUDNJVW1GdzlKLVBBUU1MQ1JaU0xadWZDTmRvRUpIVGwycVBQNExvN1RBX3VmaEd1NlJ2aldVNVAxOVNwVHh4Wm84bEV3T2lpVmVKRzZZOHpwenRadU1ZTjREdUJnMUt3X19qaFkzRGdjX0JEZWpLdVBvMUJxMmFHU3pET0l1azVnQ3BIbHQ1RUNBQ0l6TldnRENhVlNIeDRjSnE1ODhIZG1iSDdHa0U0WjRQa1lDbUhVbHBmeG5rTVBDZW5MR0lfQzNDMzR5SUZaSVNCYTBDV0ltNzNSR0hjTUt5RXhLOHFUR1JDVzlJRGtvQnNxNlJKelpUZXBWMEI1ZE1qQkNtTi1mR1AxSDNSMjNMcFlOWUIta1JlODhPTEg0Vl93anRIMEc4SVQwMGVWX0F4Y2JfVEhCaHU4bFR4MUtNZGM5bmFraHNzeWpoNVdId21DOHhsWjhiY2Z6U2Mzd3huZDZYTGVNQmxDSURCOUtGLVdwdTExdEMwU01QMzFXc3BzTkR6aDBDTkFUSmM0TlpkNHB3Z3Z4WDRBdEdVMjEzQXRaUS10QTRjeE5SSkZpMW5zQVVNQ1FVSlF6Z0dVYnRHaHRlSW93SlA1U0JCeE9aZWxoUW0zbFZIRUNDREtncUhWT2JNZnZiRFE4U2xYVGNQelZVTDRGNDh2b1VrZVhEd2dxVEZSWkVzUmNaSXNaWWNlYkI1NGg3bU5tUmpHZmNIY2JDeFAwNTZwZlNtMHFINGJWb1pzZmh6Mk9KRWt3c0kzTU00SnpmQ0o4ZG8tVFpDbEJ4MkV0a1NJOXRZVVFNaEFFRkd5d2t5Y21jenRWbWh0Z3c2WjFLeGcyQjdkelZyX0Z0aWFyNUlEcEVSdEE4LV9wWDZQSEk1SzNQNzRUVzJkc1FuMzgtZnlGUll0SXJrU0NSRmw2WXpaMVFnRGpfeENMeWU1TnRRRDZHdHQwS3FOejFhQTRNSThnQlhkbElfSlBLcl9NOGlHMjNRSzQzRWFwcXNGUFVuSTRLWFB0OG03ejgwd3BkSU10ZW1PVmIzaVlGY3hENkhzYlRqT0JneUYzdW1hRTRQellXZVRWd2pHQmNqaDZiOXVGaGw5TFAwa2RvLTQweXY4aGwza2hFTV91aV9DbTFHbE9YSFlmSy1KMWhmcG5mV3h6LXhfUjFBT09kZlpleW05OFR3aXlTU1RkNDJiMlNOQ3lOVGhsdkc0aXBBWnUzN05salZRcTZ6c0tnVmpQZEVydHFPRUVXVzJ3b0RFLUN3LWtqS2IxSFRMTDFTWWprbmZaN0gwbS15VzV2cTBVaVcwMmFrWjJ1bFBMb3BZT2ZOMHFWSGpBZnYzbm9KeUpDbVhLX1NuRzlmNGlKTFBNeVpWbzJESnRtYUUyMjZUaFBoNmxMbjR5Mjd0OXF0WVhlY0ZfTGdBelU5WEk1T3JDWnBGelhzdDhFN1FNOXVtUUFNNlhCYUdxRUV3d0NETndhcmM1WTlYcEh5ajNJU2ZFcTZmck56N25VTGFvaXA1RFFMbS1RSEFiWW5pOVpsYmJEWm1XU2NfQmpmaWd5eTJwQ252QXFsWElETHVZQi1fQm9hd0ZOYU1GVjM1VkdKalRzOTA3LXhUY1RKbzRwQ1N0NzVDSGN5ZlFwWVFLbzJwMHh0NkJCd0JzSFA2MVBETC0tVGN4M253ZHRJWU9Ec2FPeEk5azMwU0NKaksxU1FWcTZ5NVlyMExTTVdHOWdYZXBBOW9tNE1pVzJHVVBtYjM2bVlVbUVUMUxNM2NRZjl3b3RTT29DWTVVSUxrcldaRjBhaWdfRFYxbTU4dmNyOGpHVjJNZmVJSTFMZmNHcWpiU1BXNkE0dEVNdWNtcU1heGh1Tmc5Y1U4ZHVwSFRWcU9ILVIwLVdyNjlPcEtscEg2cS1MUWQyS3lRZU14WUp2QVZPQXkwaFczTjBBNklOS0tYeGlUWEY2cUhoUnQtTFoyQmVQSk5ISU9waTU0YjgyQ050SERYUi1weDBUdGRBNjU0UEMzeUFIT0Vra1RiSnZCcXRvRzR1QXdZWWg4NFk2MlJYMzBvNmdvakdub1BGV2FsZUM5bjZTVkdiM1l3dEFzS3luOGV5OGpiOWxuUWVkTkdWRWtmNnUwMnEyX1NtNjFPTkZmUDJKaXpkYjFzeXFSTk9vMWt3c3Z0akxEUXJtVVFRdWlzNHRFUWV3bjVxTmNkdXY5MWxYalBlOEMyM2lEbGZaZkpaOWZNcTdweDJIcWM0MGxpTlQ1X3ZYNHdzbHhYMTlYMWxTOUNMZmR5a2NXVnJqSzNlUHZoTTV5UVhYMHMzbjR1Tjh1ZnBnODI5dWcwWDVxeGpSc29wODVPalcxYndHa3hBVTFFcUlyQjNoSzJIcVYyeWNCWlZxb01qaW9nYW9NQnFKa3N0dGMzWXgzd0VNbnV1cHZOS0ZsQV9Cb183NzlwdVNXM0h6YnlpaEEwV1hFU0pzUFFOODV6VGdvVGpFU2todGZETVhZa19CQ2ltZlJCbmlieXAyajhfcWpka0pBNEpNZnd2d0NERU1KRjdXRWg5WFJPWXhGRHp0cVBEdXZRSW9uazRjdExLT0U0NThPTHdpSVVhWnV1RFUyRmNELXJwcTVNaEg0c0ZpVlJ3SkV4OHdpY2pkMWJNUDBmMkxrdnB2UXU4QzZ6S1BlRFhFblhpT0REckZ1OFZNbG9ObFVRa2RQVEl1V1dZYmdKNnRrTEprQ3dsbkdpNmpfY0xGdVVKZWNydmFHWFFrWGhQUjJrZTF3b1pueTFUakVlT1E3SllwamdFUFhHTUpjVXVlaWFXSy1QUTZ0VTh6M1Jmb2piYjNDbENYaVh1RFppUlFwSTR2Q0NYZVhVa0RLUkhGNG1KOGc3RW1mNk95SElURkIyeVZIcXFoRUZiVHA5MG1OUmdWYWJMU2JSNmpQckRaUS1heHJ3S1J5dlFKekNjNDQ1SWhmUDRVN1V0SlQwOFFkWWJBbnZ3RlgyM1NCa01yWnkySFpnemsyWERCTUFLaUVFZGFjRnFHQXZZZ3ZYMFU3NjRHRHZNcFY5NnJ3MUM5M2VyYWhxbDJoREcxdFJUakx6VUZHd2Y1Rl8zQzg2c2lRMVNMTDBqam9sQVl6c24wSHRpc0prVnBJVWRCOFpvTkZibGY0WWltYk1pTnN4czlHUWREQl8zenQzelFXRmxkV1dUUG5HR09Rek9idXBBSFVxRUNKbnhiMS1aZFc4Zjl1Wk16Y3JEYnNyaGNNLXpvWEJLNkhQbGZscFA3STliZEU0NGRwMm1rM1ZVV05qMEZBSjVYX0xNN0dyang5d3B6ZWxwTk1PbEFEcjlxY3dUSUpOeXNiR1k4ak1rZ2FzY2tUYzc3MHFmQnBCelRFalFoemtPSzRka0RGRlFxZlU2WGdIeDRGRENydExZdWFwQnJ6M2JSS21MZ1pSSzQ5QnJxQU9HaVN5c3dDTURvN1JxdWdhT09YcVptR3hoYzJYS21qVGFtZ05KVGJBSU81ZEw0M1prdDRDTjFlb2FGR0M4N2tYSlRBX1pYeFdKNE9lMDhZQ3dBWXJEZTJBN0RJLTBydDUweU82ZjRzWHBweFlPVUloQ0tFSzRXUmhNQjRsb19NbVRRd3NJaVNWV0ZWeTdQOU8xSHE4WEktTVVlaXlQUElHZ0M2dFZmX2xuUExsTnk3N3c5Q3pmdTJJczlRNjZub3JEZkxzMkptZ0hqaFpnZkNTUG5fUnBYQlVqVlgzUVVWSnBnNF9zcXR5MFl5d21DcjlOY0wzQmQtcWVFYVNzTjEwR2ZlbG0zR2ZCUlZXdWpMSUJLQzhPVmtEWi1xRjd5WTRYb2txSG9JQ0s0Qm9oaGRlaDRhVFlIeFIySnNxM1ZHeGNYWG9jRXJJTkRrYTdmVlE4anpHQkNMTUNzM3loclFjLXRjWTlCbGpSdzVydDZWdHBJUU9FblN4T01ZWDVqam0xdGtMdFJpQUJiX2FqV2xBV2YyUURyMHhOTEw3QmFkSDUxN2ZZVkpkaEMxMWNVTXFZb2xxZjcxRjhrSU9la0hjQVI2dmswOWdveW5NRTFLQjJCSlNSQVdXVnVMS0RaRi16d2t5bzdoRGo5Q0x4SUVkZ0hodlJwYWdyNDVTeHlFMTdxLVJzUERRbThCenpsdTZ2VDRIdXJhYm9fODhKUnRpa204czh2NmVBb1VjYUNuOHRpWVVrQnoxaHFSMXBtSms5cHhQOEE1bS1zRVNweE9tV3NBa2dnRm1PUW91VzJhMktIWWZDZHBvdmJjUHQ0Q1FHV1J1elU3MXVsS19CcFJvWVBLOTUza1F6Nk1QSDJoMmpCMTREWlMtbld3WFBQbG1FNlJaRkUzajdMcXphZEplM2JqaWw4NHdvRUtmZWpDVmYxX0FBLUFnSkRHU2VKbzZLWVB0bFRZNnJVYkhHYUg4aGdOb0pDbmtteU5ESmdsU05fb2ZQMVV5cEQtT0xTcHRJSHgwbTJobTNLei1sNnNMcXZSST0=)
        FCI_KEYSTORE_PASSWORD: Encrypted(Z0FBQUFBQmlZN0V5UGhoR28xWWZfRWNoSWs1aU1mRWt4X19GQm90eWpwUnItc1hvY3h2WW8xZFRlSDAzWTRNNllNU3RoVnRVU1cwWmZnQl9KOWt3ckk5NkhESXN0bE4xZ2c9PQ==)
        FCI_KEY_PASSWORD: Encrypted(Z0FBQUFBQmlZN0V5TjVabnF4X1Nkb3BTUUtpU2JCQk5kd0tETk1zdUJ2YWdxOWNrTjFMdFB0cWRJU0d1X01QcC1ma3V3Mmd3SFQyT2FmUGo3S3JfS1NhNV95bmxyQ0lNa0E9PQ==)
        FCI_KEY_ALIAS: Encrypted(Z0FBQUFBQmlZN0V5b1lFcWdISnhYM2RuS2NCR2tOR2U0RC0wd2pOYnlyakxaN21uZ0VRd2tWVmJibnBYbkpiWWtuWXhkaExVN3VZOUVOdG1nandkeEZRS21qUXZqTTBmbFE9PQ==)
      flutter: stable
      xcode: latest
      cocoapods: default
    cache:
      cache_paths: []
    scripts:
      - |
        # set up key.properties
        echo $FCI_KEYSTORE | base64 --decode > $FCI_KEYSTORE_PATH
        cat >> "$FCI_BUILD_DIR/android/key.properties" <<EOF
        storePassword=$FCI_KEYSTORE_PASSWORD
        keyPassword=$FCI_KEY_PASSWORD
        keyAlias=$FCI_KEY_ALIAS
        storeFile=/tmp/keystore.keystore
        EOF
      - |
        # set up local properties
        echo "flutter.sdk=$HOME/programs/flutter" > "$FCI_BUILD_DIR/android/local.properties"
      - flutter packages pub get
      - flutter build apk
    artifacts:
      - build/**/outputs/apk/**/*.apk
      - build/**/outputs/bundle/**/*.aab
      - build/**/outputs/**/mapping.txt
      - build/ios/ipa/*.ipa
      - /tmp/xcodebuild_logs/*.log
      - '*.snap'
      - build/windows/**/*.msix
      - flutter_drive.log
    publishing:
      email:
        recipients:
          - wmr1210@hotmail.com
      firebase:
        firebase_token: Encrypted(Z0FBQUFBQmlZN0V5RDh0eTZDa1lWb00zWmZ5aV9NMmgyY2kwRmxtRG9zc251dFlzdkRLc244T2tpckg1SUhndW94R3FDSE5iRktLRlNJNm56WHNwOEhMakJGNWJpV0xWNzJMWXI2XzR1bTVEZEtDbS1zekw2M1NOalRqRm96Qnc0LTh0eWlqY19ENzdpLXQyNDBxY2JBeWx5ZVRfOHdPM3ZBOWwySkFaUlYzX3JpbHNyMEl6Y2dXaHhnWngtOFk1QVFtZTR6X0R6QVp6dEhpTDd6TEliaGpIMzVTbldGSUNLQT09)
        android:
          app_id: 1:301529491668:android:f7098dc106ea7792483341
          groups:
            - test
          artifact_type: apk
